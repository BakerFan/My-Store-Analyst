<cu-custom bgColor="bg-gradual-orange" isBack="{{true}}">
  <view slot="backText">返回</view>
  <view slot="content">销售登记</view>
</cu-custom>

<scroll-view style="height:{{height}}px" scroll-into-view="{{target}}" scroll-with-animation='true' scroll-y='{{scroll}}'>

  <!--介绍-->
  <view id="introduce" class="classname" style="height: {{height*0.75}}px;width:100%;background-color: #eee;" bindtouchstart="moveStartOne" bindtouchend="moveEndOne">
    <image src="/images/background2.jpg" style="height: {{height*0.75}}px; width: 100%;" mode="scaleToFill"></image>
  </view>

  <!--服务流程-->
  <view id="workFlow" style="height: {{height*0.18}}px;">
    <view class="pro-title">销售流程</view>
    <view class='process'>
      <view class="pro-item" bindtap="stepOneHandle">
        <image class='item-img' src="/images/rsmj_{{stepOne?'l':'h'}}.png"></image>
        <text class='{{stepOne?"item-textl":"item-texth"}}'>商品名称</text>
      </view>
      <view class="pro-arrow" style='right:10rpx;'></view>
      <view class="pro-item" bindtap="stepTwoHandle">
        <image class='item-img' style='width:80rpx;' src="/images/jthx_{{stepTwo?'l':'h'}}.png"></image>
        <text class='{{stepTwo?"item-textl":"item-texth"}}'>售出数量</text>
      </view>
      <view class="pro-arrow"></view>
      <view class="pro-item" bindtap="stepThreeHandle">
        <image class='item-img' src="/images/jtys_{{stepThree?'l':'h'}}.png"></image>
        <text class='{{stepThree?"item-textl":"item-texth"}}'>信息确认</text>
      </view>
      <view class="pro-arrow"></view>
      <view class="pro-item">
        <image class='item-img' src="/images/jl.png"></image>
        <text class='item-texth'>完成售货</text>
      </view>
    </view>
  </view>

  <!--商品名称-->
  <view wx:if="{{stepOne==true}}" style="height:{{height*0.82}}px;width:100%;background-color: #f8f8f8;">
    <view style="height: {{height*0.8*0.3}}px; background-color: #eee;">

      <image src="/images/background3.jpg" style="height: 100%; width: 100%;"></image>
      <view style="height:{{height*0.8*0.1}}px; width: 70%;background-color: white;margin: auto auto; margin-top: -{{height*0.8*0.1*1.2}}px;z-index: 1; color: #fa542a;display: flex;align-items: center;justify-content: center;border-radius: 5px;position:relative;z-index:1;">请选择要售出的商品</view>
    </view>


    <view class="cu-form-group margin-top">
      <view class="title">商品名称</view>
      <picker bindchange="NameChange" value="{{nameIndex}}" range="{{name}}">
        <view class="picker">
          {{nameIndex?name[nameIndex]:'请选择商品名称'}}
        </view>
      </picker>
    </view>


    <view style="height:{{height*0.6*0.2}}px; width: 80%;background-color: white;margin: auto auto;margin-top:25px;border-radius: 5px;display: flex;flex-direction: column;align-items: center;justify-content: center;">


    </view>

    <view class="padding-sm">
      <view class="padding flex flex-direction">
        <button class="cu-btn bg-gradual-red animation-{{animation=='fade1'?'fade':''}} shadow round " data-class="fade" bindtap="stepTwoHandle">
          <text class="cuIcon-right"></text>
          <text>下一步</text>
        </button>
      </view>
    </view>

  </view>
  <!---->




  <!--售出数量-->
  <view wx:if="{{stepTwo==true}}" style="height:{{height*0.82}}px;width:100%;background-color: #f8f8f8;">
    <view style="height: {{height*0.8*0.3}}px; background-color: #eee;">

      <image src="/images/bg4.jpg" style="height: 100%; width: 100%;"></image>
      <view style="height:{{height*0.8*0.1}}px; width: 70%;background-color: white;margin: auto auto; margin-top: -{{height*0.8*0.1*1.2}}px;z-index: 1; color: #fa542a;display: flex;align-items: center;justify-content: center;border-radius: 5px;position:relative;z-index:1;">请输入售出数量</view>
    </view>

    <view style="height:{{height*0.6*0.2}}px; width: 70%;margin: auto auto;margin-top:25px;border-radius: 5px;display: flex;flex-direction: column;align-items: center;justify-content: center;">


      <i-panel title="售出数量">
        <view style="padding: 16px">
          <i-input-number value="{{ sellOutNum }}" min="0" max="{{storageNum[nameIndex]}}" bindchange="handleChange1" />
        </view>
      </i-panel>


      <view class="pro-title color:#fa452a">当前库存
      {{storageNum[nameIndex]}}件</view>

      

    </view>


    <view class="padding-sm">
      <view class="padding flex flex-direction">
        <button class="cu-btn bg-gradual-red animation-{{animation=='fade'?'fade':''}} shadow round " data-class="fade" bindtap="stepThreeHandle">
          <text class="cuIcon-right"></text>
          <text>下一步</text>
        </button>
      </view>
    </view>
  </view>





  <!--信息确认-->
  <view wx:if="{{stepThree==true}}" style="height:{{height*0.82}}px;width:100%;background-color: #f8f8f8;">
    <view style="height: {{height*0.8*0.3}}px; background-color: #eee;">

      <image src="/images/bg5.jpg" style="height: 100%; width: 100%;"></image>
      <view style="height:{{height*0.8*0.1}}px; width: 70%;background-color: white;margin: auto auto; margin-top: -{{height*0.8*0.1*1.2}}px;z-index: 1; color: #fa542a;display: flex;align-items: center;justify-content: center;border-radius: 5px;position:relative;z-index:1;">请确认订单信息</view>
    </view>




    <view class="cu-list menu {{menuBorder?'sm-border':''}} {{menuCard?'card-menu margin-top':''}}">
      <view class="cu-item {{menuArrow?'arrow':''}}">
        <view class="content">
          <text class="cuIcon-goods text-green"></text>
          <text class="text-black">商品名称</text>
        </view>
        <view class="action">
          <text class="text-black text-sm">
          {{name[nameIndex]}}</text>
        </view>
      </view>


      <view class="cu-item {{menuArrow?'arrow':''}}">
        <view class="content">
          <text class="cuIcon-shop text-green"></text>
          <text class="text-black">售出数量</text>
        </view>
        <view class="action">
          <text class="text-black text-sm">
          {{sellOutNum}}</text>
        </view>
      </view>


      <view class="cu-item {{menuArrow?'arrow':''}}">
        <view class="content">
          <text class="cuIcon-shopfill text-green"></text>
          <text class="text-black">剩余库存数量</text>
        </view>
        <view class="action">
          <text class="text-black text-sm">
          {{storageNum[nameIndex]-sellOutNum}}</text>
        </view>
      </view>

    </view>

    




    <view class="padding-sm">
      <view class="padding flex flex-direction">
        <button class="cu-btn bg-gradual-red animation-{{animation=='fade'?'fade':''}} shadow round " data-class="fade" bindtap="querenjinhuo" data-target="DialogModal1">

          <text>确认出售</text>
        </button>
      </view>
    </view>



    <view class="padding-sm">
      <view class="padding flex flex-direction">
        <button class="cu-btn bg-gradual-red animation-{{animation=='fade'?'fade':''}} shadow round " data-class="fade" bindtap="quxiaojinhuo">

          <text>取消出售</text>
        </button>
      </view>
    </view>


  </view>

</scroll-view>

<view class="cu-modal {{modalName=='DialogModal1'?'show':''}}">
  <view class="cu-dialog">

    <view class="cu-bar bg-gradual-red justify-end">
      <view class="content">{{gifTitle}}</view>
      <view class="action" bindtap="hideModal">
        <text class="cuIcon-close text-red"></text>
      </view>
    </view>


    <view class="padding-xl">
      <image src="https://image.weilanwl.com/gif/rhomb-white.gif" mode="aspectFit" class="gif-white response" style="height:240rpx"></image>
    </view>



    <view class="cu-bar bg-white justify-end">
      <view class="action">



      </view>
    </view>
  </view>
</view>



<view wx:if="{{stepFour==true}}" style="height:{{height*0.82}}px;width:100%;background-color: #f8f8f8;">
  <view style="height: {{height*0.8*0.3}}px; background-color: #eee;">

    <image src="/images/bg4.jpg" style="height: 100%; width: 100%;"></image>
    <view style="height:{{height*0.8*0.1}}px; width: 70%;background-color: white;margin: auto auto; margin-top: -{{height*0.8*0.1*1.2}}px;z-index: 1; color: #2fcabb;display: flex;align-items: center;justify-content: center;border-radius: 5px;position:relative;z-index:1;">进货成功！</view>
  </view>

  <view style="height:{{height*0.6*0.2}}px; width: 70%;background-color: white;margin: auto auto;margin-top:25px;border-radius: 5px;display: flex;flex-direction: column;align-items: center;justify-content: center;">

    <view style="position:relative;border: 1px solid lightgray;border-radius: 5px;margin-top: 20px;height: 40%;width:80%">

    </view>
  </view>



</view>